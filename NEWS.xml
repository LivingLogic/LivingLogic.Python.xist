<?xml version='1.0' encoding='iso-8859-1'?>
<section><title>Changes in ??? (released ??/??/2003)</title>
<ulist>

<item><par>Namespace handling has been completely rewritten.
Namespaces are now classes derived from <class>ll.xist.Namespace</class>.
Defining element classes can be done inside or outside the namespace
class. If the element classes are defined outside the namespace
class, they can be moved inside the namespace with a simple
attribute assignment:</par>
<prog>
class foo(xsc.Element):
	empty = False

class xmlns(xsc.Namespace):
	xmlname = "foo"
	xmlurl = "http://www.foo.com/ns/foo"

xmlns.foo = foo
</prog>
<par>The methods <method>elementkeys</method>, <method>iterelementkeys</method>,
<method>elementvalues</method>, <method>iterelementvalues</method>,
<method>elementitems</method> and <method>iterelementitems</method>
can be used for iterating through the element classes and their
names. You can use the method <method>element</method>
to get an element class with a certain name:</par>
<prog>
&gt;&gt;&gt; from ll.xist.ns import html
&gt;&gt;&gt; html.element("div")
&lt;element class ll.xist.ns.html/div at 0x824363c&gt;
</prog>
<par>For processing instructions, entities and character references
there are methods available too.</par>
<par>The method <method>update</method> can be used to add
many element classes to a namespace at once, simply by passing
a dictionary with those classes (use <lit>vars()</lit>
to add everthing that's defined inside your module). The method
<method>updatenew</method> does the same, but copies only those
attributes that don't exist in the namespace, <method>updateexisting</method>
copies only those that don't exist. You can turn a namespace
into a module with <method>makemod</method>:</par>
<prog>
from ll.xist import xsc

class foo(xsc.Element):
	empty = False

class xmlns(xsc.Namespace):
	xmlname = "foo"
	xmlurl = "http://www.foo.com/ns/foo"
xmlns.makemod(vars())
</prog>
<par>Put the above code into <filename>foo.py</filename> and
you can do the following:</par>
<prog>
>>> import foo
>>> foo
&lt;namespace foo/xmlns name=u'foo' \
url=u'http://www.foo.com/ns/foo' \
with 1 elements from 'foo.py' at 0x81bfc14&gt;
</prog>
</item>

<item><function>getns</function> has been dropped, so you always
have to pass in a <class>Namespace</class> class where a namespace
is required.</item>

<item>For the <class>ll.xist.ns.jsp.directive_page</class> element
automatic generation of the correct <lit>charset</lit> option
in the <lit>contentType</lit> attribute is only done when there
is a <lit>contentType</lit> attribute, as <lit>contentType</lit>
is optional.</item>

<item>The converter has a new property <function>node</function>.
<arg>node</arg> can't be passed to <method>conv</method> but
will be set to <self/> by <method>conv</method> automatically.
This makes it possible to access the <z>document root</z>
during conversion.</item>

<item><class>ll.xist.ns.htmlspecials.autoimg</class> no longer touches
existing width and height attributes. This means that %-formatting
of the existing attributes is no longer done.</item>

<item>Added a new class <class>ll.xist.ns.htmlspecials.autopixel</class>
that works like <class>ll.xist.ns.htmlspecials.pixel</class> but
inherits the size for the image specified via the <lit>src</lit>
attribute.</item>

<item><class>Frag</class> and <class>Element</class> now support
extended slices.</item>

<item><class>Frag</class> and <class>Element</class> now support
the methods <method>extend</method> and <method>__iadd__</method>.</item>

<item>For walking the tree the <method>walk</method> has been completely
rewritten and a new method <method>visit</method> has been added. For
more info see the docstrings.</item>

<item><class>Node</class> now has two new methods <method>copy</method>
and <method>deepcopy</method> and supports the <module>copy</module>.</item>

<item>Calling <method>mapped</method> through <method>conv</method> has
been removed. You again have to call <method>mapped</method> directly
and pass a node and a converter.</item>

<item>The &html; handling of the <class>HTMLParser</class> has been improved
(it now uses code from <module>xml.sax.drivers2.drv_sgmlop_html</module>).</item>

<item>The core functionality found in the script <filename>dtd2xsc.py</filename>
has been moved to class method <method>ll.xist.ns.xndl.fromdtd</method> in the
in the <module>ll.xist.ns.xndl</module> namespace.</item>

<item><class>ll.xist.parsers.ExpatParser</class> is now a real subclass
instead of an alias for <class>xml.sax.expatreader.ExpatParser</class>
that now reports unknown entity references to the application (if
loading of external entities is switch off, which is done by
<class>ll.xist.parsers.Handler</class> and only outside of attributes).</item>

<item>Namespaces have been added for Zope's TAL and METAL specifications.</item>
</ulist>
</section>

<section><title>Changes in 2.1.4 (released 06/13/2003)</title>
<ulist>
<item>Remove the checks for attributes in attributes and
moved the publication code for the full element into a separate
method. This allows &jsp; tag library namespaces to simply
overwrite <method>publish</method> to publish the element
even inside attributes. (This is the same fix as in release 1.5.10)</item>
</ulist>
</section>

<section><title>Changes in 2.1.3 (released 05/07/2003)</title>
<ulist>
<item>The methods <method>sorted</method>, <method>reversed</method>
and <method>shuffled</method> have been rewritten so they no longer
use <lit>sys.maxint</lit>. This change fixes those methods for
64 bit platforms (reported by Giles Frances Hall)</item>
</ulist>
</section>

<section><title>Changes in 2.1.2 (released 02/27/2003)</title>
<ulist>
<item><class>ll.xist.ns.struts_config11.plug_in</class> now
allows content (as the &dtd; states). (This is the same fix
as in release 1.5.8.)</item>
</ulist>
</section>

<section><title>Changes in 2.1.1 (released 02/11/2003)</title>
<ulist>
<item>Added a few elements and attributes to <module>ll.xist.ns.doc</module>:
<class>username</class>, which is used for the name of a user account,
<class>xref</class>, which is used for internal cross references and
the attribute <lit>id</lit> for <class>section</class>, which specifies
the target for an <class>xref</class>.</item>
</ulist>
</section>

<section><title>Changes in 2.1 (released 12/09/2002)</title>
<ulist>
<item>Added a new namespace module <module>ll.xist.ns.xndl</module>
that contains the <z>&xist; namespace definition language</z>, i.e.
elements that describe an &xist; namespace and can be used by
various scripts to generate skeleton namespace modules.
The first of these script is the &dtd; to namespace converter
<filename>dtd2xsc.py</filename>.</item>
<item>Added a new namespace module <module>ll.xist.ns.tld</module>
that contains the definition for Java Server Pages Tag Library
descriptors and a script <filename>tld2xsc.py</filename>
that uses this namespace to generate namespace modules from
<lit>tld</lit> files.</item>
<item><class>Attr</class> now supports the method
<method>filtered</method>. This is used by <method>without</method>
now. The arguments for <method>without</method> have changed,
because handling global attributes was too <z>magic</z>.
A new method <method>with</method> has been added, with does
the opposite of <method>without</method>, i.e. it removes all
attributes that are not specified as parameters.</item>
<item>The Python name of each <class>Node</class> subclass
is now available as the class attribute <lit>pyname</lit>.</item>
<item>To continue the great renaming <method>withSep</method>
has been renamed to <method>withsep</method>.</item>
<item>The namespace name for the <module>ll.xist.ns.struts_html</module>
module has been fixed.</item>
<item>The argument <arg>defaultEncoding</arg> for the various
parsing functions has been renamed to <arg>encoding</arg>.</item>
</ulist>
</section>

<section><title>Changes in 2.0.8 (released 11/20/2002)</title>
<ulist>
<item><function>ll.xist.ns.doc.getDoc</function> has been renamed
to <function>getdoc</function>.</item>
<item>The &css; parser was dropping the <lit>%</lit> from
percentage values. This has been fixed.</item>
</ulist>
</section>

<section><title>Changes in 2.0.7 (released 11/12/2002)</title>
<ulist>
<item><method>xsc.Element.__nonzero__</method> can no longer fall back
to <method>xsc.Frag.__nonzero__</method>.
(this is the same fix as in 1.5.7).</item>
</ulist>
</section>

<section><title>Changes in 2.0.6 (released 11/11/2002)</title>
<ulist>
<item>Performance optimizations.</item>
</ulist>
</section>

<section><title>Changes in 2.0.5 (released 11/11/2002)</title>
<ulist>
<item>Fixed a bug in <class>ll.xist.ns.specials.autoimg</class>:
Attributes were not converted before the size check was done
(this is the same fix as in 1.5.5).</item>
</ulist>
</section>

<section><title>Changes in 2.0.4 (released 11/08/2002)</title>
<ulist>
<item>Fixed a regression bug in <class>ll.xist.ns.jsp.directive</class>
and several documentation issues.</item>
</ulist>
</section>

<section><title>Changes in 2.0.3 (released 10/30/2002)</title>
<ulist>
<item>Fixed a few bugs in <class>HTMLParser</class>.</item>
<item>Added DocBook conversion for several elements
in <module>ll.xist.ns.doc</module>.</item>
<item>Now the <filename>__init__.py</filename> file for the
<module>ll</module> package is included.</item>
</ulist>
</section>

<section><title>Changes in 2.0.2 (released 10/21/2002)</title>
<ulist>
<item>Fixed a bug in <method>Frag.__rmul__</method> (by
reusing <method>__mul__</method>).</item>
<item>Fixed a bug with the backwards compatible prefix
mapping: Defining element classes in <lit>exec</lit> processing
instructions didn't work, because the prefixes object used for
parsing wouldn't be updated when the namespace object is
defined inside the processing instruction. Now using the default
for the <arg>prefixes</arg> argument in calls to the parsing
functions uses one global shared <class>Prefixes</class> instances
where all the namespaces that are newly defined will be registered too.</item>
</ulist>
</section>

<section><title>Changes in 2.0.1 (released 10/17/2002)</title>
<ulist>
<item>Fixed <filename>xscmake.py</filename> by removing the
prefix handling. <class>OldPrefixes</class> will always
be used for parsing now.</item>
</ulist>
</section>

<section><title>Changes in 2.0 (released 10/16/2002)</title>
<ulist>
<item>&xist; now requires at least Python 2.2.1.</item>
<item>Attribute handling has been largely rewritten. Instead of
a class attribute <lit>attrHandlers</lit>, the attributes
are now defined through a nested class named <class>Attrs</class>
inside the element. This class must be derived from <class>ll.xist.Element.Attrs</class>
(or one of its subclasses if you want to inherit attributes from
this class). Defining attributes is done through classes nested
inside this attributes class and derived from any of the known
attribute classes (like <class>TextAttr</class>, <class>URLAttr</class> etc.).
The class name will be the attribute name (and can be overwritten
with a class attribute <lit>xmlname</lit>. This makes it possible
to have docstrings for attributes. Furthermore it's possible
to define attribute default via the class attribute <lit>default</lit>,
allowed values for the attribute via <lit>values</lit>,
which is a list of allowed values, and whether the attribute is
required or not via <lit>required</lit>.</item>
<item>&xist; now has real namespace support. The new class
<class>ll.xist.xsc.Prefixes</class> can be used to define a
mapping between prefixes and namespace names. This can be
used for parsing and publishing. Namespace support is even
available for entities and processing instruction.</item>
<item>Global attributes are supported now. Namespace modules
for the <lit>xml</lit> and <lit>xlink</lit> namespaces
have been added (and <class>ll.xist.xsc.XML</class> was
moved to <module>ll.xist.ns.xml</module>).</item>
<item>A new namespace module for &svg; 1.0 has been added: <module>ll.xist.ns.svg</module>.</item>
<item>The &html; specific parts of <module>ll.xist.ns.specials</module>
have been split off into a separate module <module>ll.xist.ns.htmlspecials</module>.</item>
<item>Comparison of attributes with strings has been removed.
You have to use <method>__unicode__</method> or <method>__str__</method>
now before comparing.</item>
<item>The <class>HTMLParser</class> now removes unknown attributes
instead of complaining.</item>
<item>There is a new parser class <class>BadEntityParser</class>, which
is a &sax;2 parser that recognizes the character entities
defined in &html; and tries to pass on unknown or malformed
entities to the handler literally.</item>
<item>To give all nodes a chance to do something after they have been parsed
(e.g. to prepend the base &url; for <class>URLAttr</class> nodes), the parser
now calls the method <method>parsed</method> immediately after node creation.
This is used for the new class <class>StyleAttr</class>, which uses the
<class>CSSTokenizer</class>, to prepend to base &url; to all &url;s
found in a style attribute.</item>
<item>The pixel images have been moved to the directory <dirname>px</dirname>
to make image &url;s shorter.</item>
</ulist>
</section>

<section><title>Changes in 1.5.10 (released 06/13/2003)</title>
<ulist>
<item>Remove the checks for attributes in attributes and
moved the publication code for the full element into a separate
method. This allows &jsp; tag library namespaces to simply
overwrite <method>publish</method> to publish the element
even inside attributes.</item>
</ulist>
</section>

<section><title>Changes in 1.5.9 (released 04/30/2003)</title>
<ulist>
<item>Reregistering a namespace now properly overwrites
the old version in <lit>xsc.namespaceRegistry</lit>.</item>
</ulist>
</section>

<section><title>Changes in 1.5.8 (released 02/27/2003)</title>
<ulist>
<item><class>ll.xist.ns.struts_config11.plug_in</class> now
allows content (as the &dtd; states).</item>
</ulist>
</section>

<section><title>Changes in 1.5.7 (released 11/12/2002)</title>
<ulist>
<item><method>xsc.Element.__nonzero__</method> can no longer fall back
to <method>xsc.Frag.__nonzero__</method>.</item>
</ulist>
</section>

<section><title>Changes in 1.5.6 (released 11/11/2002)</title>
<ulist>
<item>Performance optimizations.</item>
</ulist>
</section>

<section><title>Changes in 1.5.5 (released 11/11/2002)</title>
<ulist>
<item>Fixed a bug in <class>ll.xist.ns.specials.autoimg</class>:
Attributes were not converted before the size check was done.</item>
</ulist>
</section>

<section><title>Changes in 1.5.4 (released 09/30/2002)</title>
<ulist>
<item><filename>xscmake.py</filename> now tries to strip off
a trailing <lit>xsc</lit> from the filename before it falls back
to the extension <lit>html</lit> (The builtin extension mapping
is still tried first).</item>
</ulist>
</section>

<section><title>Changes in 1.5.3 (released 09/25/2002)</title>
<ulist>
<item>Added new processing instruction class <class>ll.xist.ns.php.expression</class>
that generates a &php; <lit>print</lit> statement from its content.</item>
</ulist>
</section>

<section><title>Changes in 1.5.2 (released 09/19/2002)</title>
<ulist>
<item>Removed the <lit>value</lit> magic from
<class>ll.xist.ns.form.checkbox</class> as this
conflicted with dynamic <lit>value</lit> values.</item>
</ulist>
</section>

<section><title>Changes in 1.5.1 (released 09/17/2002)</title>
<ulist>
<item>Comparison of attributes with strings has been removed.
You have to use <method>__unicode__</method> or <method>__str__</method>
instead.</item>
<item>The <class>HTMLParser</class> now removes unknown attributes
instead of complaining.</item>
<item>There is a new parser class <class>BadEntityParser</class>, which
is a &sax;2 parser that recognizes the character entities
defined in &html; and tries to pass on unknown or malformed
entities to the handler literally.</item>
<item>To give all nodes a chance to do something after they have been parsed
(e.g. to prepend the base URL for <class>URLAttr</class> nodes), the parser
now calls the method <method>parsed()</method> immediately after node creation.
This is used for the new class <class>StyleAttr</class>, which uses the
<class>CSSTokenizer</class>, to prepend the base url to all urls found in
a style attribute.</item>
<item>The <class>HTMLParser</class> now removes unknown attributes
instead of complaining.</item>
<item>There is a new parser class <class>BadEntityParser</class>, which
is a &sax;2 parser that recognizes the character entities
defined in &html; and tries to pass on unknown or malformed
entities to the handler literally.</item>
<item>To give all nodes a chance to do something after they have been parsed
(e.g. to prepend the base &url; for <class>URLAttr</class> nodes), the parser
now calls the method <method>parsed</method> immediately after node creation.
This is used for the new class <class>StyleAttr</class>, which uses the
<class>CSSTokenizer</class>, to prepend to base &url; to all &url;s
found in a style attribute.</item>
</ulist>
</section>

<section><title>Changes in 1.4.3 (released 04/29/2002)</title>
<ulist>
<item>New namespace module <module>xist.ns.struts_config11</module>
allows to parse and modify <link href="http://jakarta.apache.org/struts/">Struts</link>
configuration files conforming with the
<link href="http://jakarta.apache.org/struts/dtds/struts-config_1_1.dtd">Struts 1.1 DTD</link>.
</item>
</ulist>
</section>

<section><title>Changes in 1.4.2 (released 03/22/2002)</title>
<ulist>
<item>Updated <filename>xscmake.py</filename> to be compatible with the new
<module>url</module>.</item>
<item><class>xist.ns.jsp.directive_page</class> now automatically sets the
<lit>contentType</lit> on publishing.</item>
</ulist>
</section>

<section><title>Changes in 1.4.1 (released 03/21/2002)</title>
<ulist>
<item>Removed <class>TidyURLInputSource</class>. Now it's possible
to pass a <lit>tidy</lit> flag to the remaining functions <function>parseString</function>,
<function>parseFile</function> and <function>parseURL</function> to specify whether
the source should be tidied.</item>
<item>To prevent an element from being registered in a <class>Namespace</class>
the class attribute <lit>register</lit> can be used now. This makes
it possible to have a name for the element even when it's not registered.</item>
<item><module>xist.ns.form</module> elements now have all the attributes that the
corresponding elements from <module>xist.ns.html</module> have.</item>
<item>Removed the old <module>xist.url</module> from the Windows distribution.</item>
</ulist>
</section>

<section><title>Changes in 1.4 (released 03/18/2002)</title>
<ulist>
<item>Reimplemented &url; handling again. Now the new global
module <module>url</module> is used for that.</item>
</ulist>
</section>

<section><title>Changes in 1.3.1 (released 03/14/2002)</title>
<ulist>
<item>Added a method <method>pretty</method> to <class>Node</class>
for generating a pretty printable version of the node.</item>
<item><lit>xsc.Node.name</lit> no longer is a class method, but a
class attribute, that will be set at class instantiation time
by the meta class.</item>
</ulist>
</section>

<section><title>Changes in 1.3 (released 02/12/2002)</title>
<ulist>
<item>Ported to Python 2.2. <class>Node</class> is now derived from
<class>object</class>, <class>Frag</class> from <class>list</class> and
there's a new class <class>Attrs</class> which is derived from
<class>dict</class> for the attribute mappings. All presenters
have been adapted to work with <class>Attrs</class>.
In addition to the usual dictionary methods and operators <class>Attrs</class>
has a method <method>without</method> that returns a copy of the
<class>Attrs</class> instance with some specified attributes removed.</item>
<item>All the node classes now have a new method <method>walk</method> that generates
all nodes in the tree using the new generator feature of Python 2.2.</item>
<item>Also a new method <method>walkPath</method> has been added that works the
same as <method>walk</method> but yields the complete path to each node
as a list.</item>
<item>Added a class <class>block</class> to <module>xist.ns.jsp</module>.
The content of the <class>block</class> instance will simply be enclosed
in a <lit>{}</lit> block. <module>xist.ns.php</module> got such
a class too.</item>
<item>Added a new module <module>xist.ns.ihtml</module> for
iMode &html;.</item>
<item>Added new modules <module>xist.ns.css</module> and
<module>xist.ns.cssspecials</module> for generating &css;.</item>
<item>Now the various attributes of the <class>Converter</class> object
are collected in a <class>ConverterState</class> object and it's possible
to push and pop those states, i.e. it's now easy to temporarily modify a
converter object during a <method>convert</method> call and revert back
to a previous state afterwards.</item>
<item><function>parseURL</function> and <function>parseTidyURL</function>
now have an additional parameter <lit>headers</lit> which is a list of
string pairs specifying additional headers to be passed in with the
request.</item>
<item><function>parseString</function> has an additional parameter
<lit>systemId</lit> which will be the system id of the
<class>InputSource</class>.</item>
<item>The distribution now includes the makefile and the &xml;
source files so now the distribution can rebuild ifself.</item>
<item>Various other small bugfixes and enhancements.</item>
</ulist>
</section>


<section><title>Changes in 1.2.5 (released 12/03/2001)</title>
<ulist>
<item>Added a new element <class>contentscripttype</class> to
<module>xist.ns.meta</module> that generates a
<lit>&lt;meta http-equiv="Content-Script-Type" ...&gt;</lit>
element.</item>
<item><function>xist.ns.doc.explain</function> now generates anchor elements
for the class, function and method description, so now the
links on the &xist; webpages work.</item>
<item>Docstrings and documentation has been reworked. Now
<class>xist.ns.doc.pyref</class> no longer implies a font change.
Use the classes <class>xist.ns.doc.module</class>, <class>xist.ns.doc.class</class>,
<class>xist.ns.doc.method</class>, <class>xist.ns.doc.function</class> and
<class>xist.ns.doc.arg</class> to mark up your Python identifiers.</item>
<item>Added the attributes <lit>type</lit> and <lit>key</lit>
to <class>xist.ns.struts_config.data_source</class>.</item>
</ulist>
</section>


<section><title>Changes in 1.2.4 (released 11/23/2001)</title>
<ulist>
<item>Added the deprecated attributes <lit>start</lit> to
<class>xist.ns.html.ol</class> and <lit>value</lit> to
<class>xist.ns.html.li</class>.</item>
</ulist>
</section>


<section><title>Changes in 1.2.3 (released 11/22/2001)</title>
<ulist>
<item>Added missing <method>asPlainString</method> methods to
<class>Comment</class> and <class>DocType</class>.</item>
</ulist>
</section>


<section><title>Changes in 1.2.2 (released 11/16/2001)</title>
<ulist>
<item><method>xist.url.URL.fileSize</method> and <method>xist.url.URL.imageSize</method>
now use the warning framework to report errors.</item>
<item>There is a new presenter named <class>CodePresenter</class> that dumps the
tree as Python source code.</item>
<item>The filenames of the pixel images used by <class>xist.ns.specials.pixel</class>
have changed. These images are now included.</item>
</ulist>
</section>


<section><title>Changes in 1.2.1 (released 10/08/2001)</title>
<ulist>
<item>URLs that are completely dynamic will now be left in peace when parsing
or publishing.</item>
</ulist>
</section>


<section><title>Changes in 1.2 (released 10/03/2001)</title>
<ulist>
<item><par><class>xist.ns.meta.keywords</class>
and <class>xist.ns.meta.description</class>
no longer call <method>asPlainString</method>
on their content. This makes it possible to e.g. generate the keywords via &jsp;:</par>
<example>
<prog>
&gt;&gt;&gt; from xist import parsers
&gt;&gt;&gt; from xist.ns import meta, jsp
&gt;&gt;&gt; s = '&lt;keywords&gt;&lt;?jsp:expression "foo"?&gt;&lt;/keywords&gt;'
&gt;&gt;&gt; e = parsers.parseString(s)
&gt;&gt;&gt; print e.conv().asBytes()
&lt;meta name="keywords" content="&lt;%= "foo" %&gt;" /&gt;
</prog>
</example>
</item>
<item>When an element occurs inside an attribute during publishing, there
won't be an exception raised any more. Instead the content of the element
will be published. This fixes problems with abbreviation entities inside
attributes.</item>
<item><class>xist.parsers.TidyURLInputSource</class> now uses the new
experimental eGenix mx Extension package, which includes a Python
port of <app>tidy</app>.</item>
<item><method>__repr__</method> now uses the new class <class>presenters.PlainPresenter</class>
which gives a little more info than the default <method>__repr__</method>.</item>
<item>URL handling has been changed again. Upto now, <class>URLAttr</class> had
an additional instance attribute <lit>base</lit>, which was the <z>base</z> file/URL
from which the attribute was parsed. Now the base URL will be directly incorporated
into the URL. You can pass the base URL to all the parsing functions. Similar to
that when publishing you can specify a base URL. All URLs in the tree will be
output relative to this base URL. Joining URLs is now done via <method>__div__</method>
and no longer via <method>__add__</method>. This makes it more consistent with
<module>fileutils</module>. The plan is to make URLs string like immutable objects
and to merge them with <class>fileutils.Filename</class>.</item>
<item><class>xist.ns.specials.php</class> has been moved to its own
module (<module>xist.ns.php</module>). This module provided additional
convenience processing instructions (just like <module>xist.ns.jsp</module>
does).</item>
</ulist>
</section>


<section><title>Changes in 1.1.3 (released 09/17/2001)</title>
<ulist>
<item>The global namespace registry now keeps a sequential list of all registered
namespaces, which will be used by the parser when searching for names. This
gives a predictable search order even without using <class>Namespaces</class>
and its <method>pushNamespace</method> method: modules imported last will be searched
first.</item>
<item>Processing instructions are now allowed inside attributes when
publishing.</item>
<item><module>xist.ns.docbooklite</module> has been renamed to <module>xist.ns.doc</module>.
It can now generate &html; and Docbook output and has improved a lot. The &xist; web pages
now use this for automatic documentation generation. The doc example has been removed.</item>
<item><class>xist.url.URL</class> now has a new method <method>info</method> that returns the headers
for the file/URL.</item>
<item><class>xist.url.URL</class> now has a methods <method>fileSize</method> and <method>imageSize</method>
too.</item>
<item><class>xist.ns.jsp.directive_page</class> now has new attribute <lit>session</lit>.</item>
</ulist>
</section>


<section><title>Changes in 1.1.2 (released 08/21/2001)</title>
<ulist>
<item><method>__repr__</method> now uses the new class <class>presenters.PlainPresenter</class>
which gives a little more info than the default <method>__repr__</method>.</item>
</ulist>
</section>


<section><title>Changes in 1.1.1 (released 08/01/2001)</title>
<ulist>
<item>Small bugfix in <function>presenters.strProcInst</function></item>
<item>fixed <class>xist.ns.struts_html.option</class> to allow content</item>
</ulist>
</section>


<section><title>Changes in 1.1 (released 07/19/2001)</title>
<ulist>
<item>Sequences in constructor arguments for <class>Frag</class> and
<class>Element</class> are again expanded and it's again possible
to pass dictionaries in an <class>Element</class> constructor to
specify attributes. As sequences are always unpacked, the method
<method>extend</method> is gone. This works for <method>append</method>
and <method>insert</method> too.</item>

<item><par><class>Node</class> and <class>Frag</class> implement
<method>__mul__</method> and <method>__rmul__</method>, so you can do stuff like:</par>
<prog>
html.br()*5
</prog>
<par>This returns a <class>Frag</class> with five times to same node.</par></item>

<item><par>Arguments for the converter constructor can be passed to
<method>xist.xsc.Node.conv</method> now, so it's possible to do stuff like this:</par>
<prog>
from xist.ns import code
print code.Eval("return converter.lang") \
	.conv(lang="en").asBytes()
</prog>
<par>which will print <lit>en</lit>.</par></item>
<item>The option <arg>XHTML</arg> for the publishers has been changed
to lowercase.</item>
<item><class>xist.ns.html.html</class> will automatically generate a
<lit>lang</lit> and <lit>xml:lang</lit> attribute when the
converter has a language set.</item>
</ulist>
</section>


<section><title>Changes in 1.0 (released 06/18/2001)</title>
<ulist>
<item>New module for &wml; 1.3.</item>

<item>The publishing interface has changed internally
and publishing should be faster now.</item>

<item>Publishers now support a new parameter:
<arg>usePrefix</arg>, which specifies if namespace prefixes
should be output for the element names.</item>

<item>Part of the implementation of the publishing
stuff has been moved to C, so now you'll need
a C compiler to install &xist;.</item>

<item>When publishing <lit>"</lit>, it will now only be replaced with
<lit>&amp;quot;</lit> inside attributes.</item>

<item>All the <method>asHTML</method> methods now have an additional argument
<arg>converter</arg>. This makes it possible
to implement different processing modes or stages
for new elements. All currently implemented elements and
entities ignore this argument, but pass it on
in the call to their childrens' <method>asHTML</method> method.
As the name <method>asHTML</method> no longer makes sense, <method>asHTML</method>
has been renamed to <method>convert</method>.</item>

<item>There is now a tool <filename>dtd2xsc.py</filename> in the
<filename>scripts</filename> directory that creates
a skeleton &xist; module from a &dtd; (this requires <app>xmlproc</app>
from the <app>PyXML</app> package).</item>

<item>New preliminary module for DocBook 4.12.
(Incomplete: <method>convert</method> methods and Unicode character
entities are missing; any volunteers for implementing 375 classes?)</item>

<item>New module <filename>ruby.py</filename> that implements the
<link href="http://www.w3.org/TR/ruby/xhtml11-ruby-1.mod">W3C Ruby draft</link>.
</item>

<item><filename>sql.py</filename> has been removed from &xist;, but is available
as a <link href="root:sql/index.html">separate module</link>.</item>

<item>The parsing interface has been changed. Parsing is now done
with the functions <function>parseFile</function>, <function>parseString</function>,
<function>parseURL</function> and <function>parseTidyURL</function> in the module
<module>parsers</module>. It's now possible to specify which parser should
be used for parsing by passing a SAX2 parser instance to any of
these functions. &xist; now includes a rudimentary SAX2 driver
for <class>sgmlop</class> and a rudimentary &html; parser that
emits SAX2 events.</item>

<item>The python-quotes example has been updated to work with expat.</item>

<item>Added a new example: media.</item>

<item>All abbreviation entities have been moved to
a new module <filename>abbr.py</filename>.</item>

<item>All the modules that provide new elements and entitites
have been moved to a subpackage <module>ns</module>.</item>

<item><class>Frag</class> and <class>Element</class>
now have new methods <method>sorted</method>,
<method>reversed</method>, <method>filtered</method> and
<method>shuffled</method> that return sorted, reversed, filtered
and shuffled versions of the <class>Frag</class>/<class>Element</class>
object.</item>

<item>New namespace modules <filename>ns/jsp.py</filename> and
<filename>ns/struts_html.py</filename> have been added that allow you to
use <link href="http://java.sun.com/products/jsp/">&jsp;</link> and
<link href="http://jakarta.apache.org/struts/">Struts</link> tags with &xist;.</item>

<item>A new method <method>asText</method> was added, that returns
the node as a formatted plain &ascii; text (this requires that
<app moreinfo="http://w3m.sf.net/">w3m</app>
is installed.)</item>

<item><filename>make.py</filename> has been renamed to
<filename>xscmake.py</filename> and moved to the
<dirname>scripts</dirname> directory,
it will be installed as a callable script with <lit>python setup.py install_scripts</lit>.</item>

<item><filename>xscmake.py</filename> has a new option <option>--files</option>/<option>-f</option>.
The argument is a file containing a list of filenames (one
name per line) that should be converted.</item>

<item><filename>xscmake.py</filename> has a new option <option>-r</option>/<option>--parser</option>
for specifying which parser to use. Allowed values are <lit>sgmlop</lit>
and <lit>expat</lit>.</item>

<item><par><filename>xscmake.py</filename> has a new option <option>-n</option>/<option>--namespace</option>
that can be used for appending <class>Namespace</class>
objects to the <class>Namespaces</class> object used by <filename>xscmake.py</filename>.</par>
<example>
<title>Using the --namespace option</title>
<prog>
xscmake.py -n html -n spam eggs.xsc
</prog>
</example>
<par>With this call the parser will find element classes from the
module with the prefix name <lit>spam</lit> before those
from <lit>html</lit> and those before anything else.</par></item>

<item><class>xist.url.URL</class> no longer has an attribute
<lit>ext</lit>. <lit>file</lit> and <lit>ext</lit> are
merged.</item>

<item>The special treatment of sequences as constructor arguments
to <class>Frag</class> and <class>Element</class>
has be removed, so &xist; will no longer remove one level of
nesting. If you still want that, use a <lit>*</lit> argument.</item>

<item><class>Frag</class> and <class>Element</class>
now have a new method <method>mapped</method>,
that recursively maps the nodes through a function. This is like
<method>convert</method> but via an external function.</item>

<item><par>Attribute handling has been improved thanks to a suggestion
by Hartmut Goebel: <method>Element.__getitem__</method> now
always works as long as the attribute name is legal. If the attribute
is not set, an empty attribute will be returned. All empty attributes
will be considered as being not set and so <method>hasAttr</method>
returns <lit>0</lit> for them, and <method>publish</method> doesn't
publish them. This simplifies several very common cases:</par>
<ulist>
<item>Copying an attribute from one element to another works regardless
of whether the attribute is set or not;</item>
<item>Testing for an attributes presence can now be done much
simpler: <lit>if element["attrname"]</lit> instead of
<lit>if element.hasAttr("attrname")</lit> (which still
works, and should be a little faster);</item>
<item><par>When you construct a &dom; tree and the presence or absence
of an attribute is tied to a condition, you can construct the attribute
in advance and use it afterwards in the tree construction:</par>
<prog>
if <rep>condition</rep>:
	align = "right"
else:
	align = None
node = html.div("spam", align=align)
</prog>
<par>So, when the <lit><rep>condition</rep></lit> is false,
the node will not have the attribute <lit>align</lit> set.</par></item>
</ulist>
</item>
<item><par><class>xist.ns.cond.If</class> (and <class>xist.ns.cond.ElIf</class>)
can now be used to test for attributes of the converter. I.e. it's possible to
write the following &xml;:</par>
<prog>
&lt;if lang="en"&gt;Title
&lt;elif lang="de"&gt;Überschrift
&lt;/if&gt;
</prog>
</item>
<item>URL handling has be completely changed and is much, much simpler now.
There are no more path markers. To specify an URL that is relative to the
current directory use the scheme <lit>root</lit> (e.g. <lit>root:main.css</lit>).</item>
</ulist>
</section>


<section><title>Changes in 0.4.7 (released 11/24/2000)</title>
<ulist>
<item>Fixed a bug in the entity handling.</item>

<item>Added a few deprecated elements and attributes to
the <module>html</module> module.</item>

<item>Improved the publishing of attributes. Now all attribute
values will be published. For boolean attributes no value
will be published for <lit>XHTML==0</lit> and the attribute
name will be used for <lit>XHTML==1</lit> or <lit>XHTML==2</lit>.</item>

<item><method>Element.compact</method> now works (better) ;).</item>

<item>Incorparated many bug fixes from Hartmut Goebel.</item>

<item>Implemented <method>xsc.Element.copyDefaultAttrs</method>, which copies
unset attributes over from a dictionary (simplifies
implementing <class>specials.plaintable</class> and <class>specials.plainbody</class>)</item>

<item><method>providers.Provider.pushNamespace</method> now handles multiple
arguments which may be <class>Namespace</class> objects or modules
(in which case, the <lit><rep>module</rep>.namespace</lit> will be pushed)</item>

<item><method>providers.Providers.popNamespace</method> can now pop multiple
namespaces at once.</item>

<item><class>providers.TidyURIProvider</class> now uses <function>os.popen3</function> for
piping the file through tidy, so now there will be
no more temporary files. The call to tidy now includes
options that hopefully make the output more suited to
&xist;.</item>

<item>Incorparated a new <filename>url.py</filename> by Hartmut Goebel, that fixes
many problem (e.g. optimizing <lit>http://server/foo/bar/../../baz.gif</lit>
now works.)</item>

<item><filename>make.py</filename> includes a new option <option>--path</option> for
adding directories to <lit>sys.path</lit>.</item>
</ulist>
</section>


<section><title>Changes in 0.4.6 (released 11/03/2000)</title>
<ulist>
<item>Now uses <class>sgmlop.XMLParser</class> instead of
<class>sgmlop.SGMLParser</class>, so case is preserved.</item>

<item>Fixed another regression from the URL to string conversion
change.</item>
</ulist>
</section>


<section><title>Changes in 0.4.5 (released 11/01/2000)</title>
<ulist>
<item>Converting URLs to nodes is now done in <function>ToNode</function>,
so <class>URL</class> objects can be used everywhere.</item>

<item>Fixed a few bugs in <method>Text._strtext</method> and
<method>URLAttr._str</method>.</item>
</ulist>
</section>


<section><title>Changes in 0.4.4 (releases 10/27/2000)</title>
<ulist>
<item>Now testing if characters can be encoded with the
specified encoding is done directy. This means, that
escaping unencodable characters now works even with
exotic encodings (tested with
<link href="http://pseudo.grad.sccs.chukyo-u.ac.jp/~kajiyama/python/"><filename>JapaneseCodecs-1.0.1.tar.gz</filename></link>).</item>

<item>The <class>URLAttr</class> constructor now can handle a single parameter
of the type <class>URL</class>.</item>

<item>The URL to string conversion function have changed:
<method>URL.asString</method> returns the URL with path markers,
<method>URL.asPlainString</method> returns the URL without path markers.</item>

<item>Added the <lit>i18n</lit> attribute to the <class>font</class> element.</item>

<item>Fixed the clashes between the class names for the elements
and entities <class>sub</class> and <class>sup</class> in <filename>html.py</filename>.</item>

<item>Several small enhancements and bug fixes contributed by
Hartmut Goebel.</item>
</ulist>
</section>


<section><title>Changes in 0.4.3 (released 10/19/2000)</title>
<ulist>
<item>Now processing instruction classes are registered in the
same way as elements and entities are.</item>

<item>The leaf nodes (<class>Text</class>, <class>Comment</class>,
<class>ProcInst</class>) are now considered immutable.
This means that their <method>asHTML</method> method can
simply return <self/>, because now those nodes can be shared between
trees. Functionality for manipulation the objects is provided by a mixin
class very similar to <class>UserString</class>. All this results
in a speedup of about 10% for the python-quotes example.</item>

<item>Small optimizations in the <method>asHTML</method> methods of <class>Element</class> and
<class>Frag</class> optimized away many calls to <method>append</method>,
<method>extend</method> and <method>ToNode</method> and result in a speedup
of about 30% for the python-quotes example. One consequence of this is
that <class>Null</class> objects will no longer be ignored.</item>
</ulist>
</section>


<section><title>Changes in 0.4.2 (released 09/24/2000)</title>
<ulist>
<item>New elements <class>keywords</class> and <class>description</class> in <filename>meta.py</filename>.</item>

<item>Fixed a bug in <method>Namespace.register</method>, now setting <lit>name=None</lit>
to prevent an element from being registered works again.</item>
</ulist>
</section>


<section><title>Changes in 0.4.1 (released 09/21/2000)</title>
<ulist>
<item>A new module named <filename>meta.py</filename> has been created, that simplifies
generating meta tags.</item>

<item>Various small bugfixes.</item>
</ulist>
</section>


<section><title>Changes in 0.4 (released 09/19/2000)</title>
<ulist>
<item>&xist; now requires at least Python 2.0b1.</item>

<item>A new bugfixed version of the <app>sgmlop</app> source is available
from the <link href="ftp://ftp.livinglogic.de/pub/livinglogic/xist/">&ftp; site</link>.</item>

<item>&xist; now completely supports Unicode. For output any
encoding known to Python can be used, so now you
can output your &html; in ASCII, Latin-1, UTF-8, UTF-16, ...</item>

<item>All publishers have been updated to support Unicode.
The publishing interface has been streamlined (<arg>encoding</arg>
and <arg>XHTML</arg> parameters are now attributes of the publisher).</item>

<item><method>asString</method> will now always return a Unicode string. If you
want a byte string use <method>asBytes</method> instead, where the encoding
can be specified as an argument.</item>

<item>There an additional publisher class <class>FilePublisher</class>, which can
be used for publishing to a file (or anything else that has
a <method>write</method> and a <method>writelines</method> method, and is supported by the stream
writer available through <function>codecs.lookup</function>).</item>

<item>Element and attribute names are no longer converted to lowercase.
If you have an attribute name which clashes with a Python
keyword (e.g. <lit>class</lit>) append an underscore (<lit>_</lit>),
which will be removed before accessing the attribute. This is the <z>official</z>
Python method for handling these cases.</item>

<item>Elements and entities are no longer registered one by one. Now
you can build <class>Namespace</class> objects which are used for searching
and there are <method>pushNamespace</method> and <method>popNamespace</method>
functions in <module>XSC.xsc</module>. For more info, see the source.</item>

<item>Image size calculation has been removed from <class>html.img</class> and
<class>html.input</class>. Use <class>specials.autoimg</class> and
<class>specials.autoinput</class> for that.</item>

<item><method>__getitem__</method>, <method>__setitem__</method> and <method>__delitem</method>
of <class>Frag</class> and <class>Element</class> now accepts a list as an argument.
The method will be applied recursively, i.e. <lit>e[[0, 1, "foo", 2]</lit> is the
same as <lit>e[0][1]["foo"][2]</lit>.</item>

<item>The deprecated module <filename>db.py</filename> no longer exists. Useful functions and elements
from <filename>db.py</filename> have been moved to <filename>sql.py</filename> and
<filename>form.py</filename> respectively.</item>

<item>When using <function>xsc.make</function> the encoding and XHTML parameters to use can now
be specified on the command line (e.g. <lit>--encoding utf-8 --xhtml 2</lit>)</item>

<item><par>Handling of multiline <markup>&lt;?xsc-eval?&gt;</markup> and <markup>&lt;?xsc-exec?&gt;</markup>
has been enhanced, although, &xist; will not be able to guess the correct indentation
in all cases. As a workarround simply add a Python comment to the beginning:</par>
<prog>
&lt;?xsc-exec
	for i in xrange(10):
		do(i)
?&gt;
</prog>
<par>won't work</par>
<prog>
&lt;?xsc-exec
	#
	for i in xrange(10):
		do(i)
?&gt;
</prog>
<par>will.</par>
</item>

<item><par>Make functionality has been moved to <filename>make.py</filename>, as certain modules can't
be used as the main script, because reimporting them in processing
instructions won't work. Now you can simply call</par>
<example>
<title>The new make script</title>
<prog>make.py --import xist.html --import spam eggs.xsc</prog>
</example>
</item>

<item><par>There is a new module <filename>cond.py</filename>, that contains elements that can be used for
conditionals:</par>
<prog>
&lt;?xsc-exec a=42?&gt;
&lt;if cond="a==21"&gt;
	&lt;b&gt;foo&lt;/b&gt;
&lt;elif cond="a==42"/&gt;
	&lt;i&gt;bar&lt;/i&gt;
&lt;else/&gt;
	baz
&lt;/if&gt;
</prog>
</item>
</ulist>
</section>


<section><title>Changes in 0.3.9 (released 08/10/2000)</title>
<ulist>
<item><app>sgmlop</app> will now be found either via
<lit>import sgmlop</lit>
or via
<lit>from xml.parsers import sgmlop</lit>
</item>
</ulist>
</section>


<section><title>Changes in 0.3.8 (released 07/14/2000)</title>
<ulist>
<item>Fixed a bug in <method>URLAttr.publish</method>, which prevented <class>URLAttr</class>
from working at all.</item>
</ulist>
</section>


<section><title>Changes in 0.3.7 (released 07/06/2000)</title>
<ulist>
<item>Fixed a bug in <class>html.img</class> and <class>html.input</class>.
Now image size calculation works again.</item>
</ulist>
</section>


<section><title>Changes in 0.3.6 (released 07/04/2000)</title>
<ulist>
<item>Fixed a bug in <method>Node._matches</method>, which resulted in a non working
<method>find</method>.</item>
</ulist>
</section>


<section><title>Changes in 0.3.5 (released 07/02/2000)</title>
<ulist>
<item>The documentation example has been enhanced. Now documenting methods works.</item>

<item>When the member <lit>elementname</lit> in the element class is set before calling
<function>registerElement</function>, this element name will be used for the element. This
allows custom names even when using <function>registerAllElements</function>.</item>

<item>Comparison of scheme and server in URLs is done case insensitive
(as <link href="http://www.ietf.org/rfc/rfc2068.txt">RFC 2068</link>
requires.)</item>

<item><par>Image size calculation is now done in <method>asString</method> and
not in <method>asHTML</method>.
This allows to write faster code. Old method:</par>
<prog>e = html.div(html.img(...),gurk.hurz()).asHTML().asString()</prog>
<par>New method</par>
<prog>e = html.div(html.img(...),gurk.hurz().asHTML()).asString()</prog></item>

<item>Image size calculation is now done for <markup>&lt;input type="image"&gt;</markup>.
The <lit>size</lit> attribute is set to the image width.</item>

<item><par>Manipulating the path in an &url; is now done via the usual
<method>__setitem__</method>/<method>__getitem__</method> stuff,
which keeps the path in a consistent state.</par>
<prog>
&gt;&gt;&gt; from xist.URL import URL
&gt;&gt;&gt; u = URL("/foo/*/../bar/baz.gif")
&gt;&gt;&gt; del u[1]
&gt;&gt;&gt; u
URL(scheme='server', path=['bar'], file='baz', ext='gif')
</prog>
</item>

<item><method>findNodes</method> (which has been shortened to <method>find</method>)
has an additional argument <arg>test</arg>, which can be a test function that will
be called when the node passes all other tests.</item>

<item><method>asString</method> no longer generates a string directly, but uses the new method
<method>publish</method>, which has an additional argument <arg>publisher</arg>,
to which the strings to be output are passed.</item>
</ulist>
</section>


<section><title>Changes in 0.3.4 (released 05/31/2000)</title>
<ulist>
<item>Location information is now copied over in <method>clone</method>, <method>asHTML</method>
and <method>compact</method> where appropriate, so you know even in the &html; tree
where something came from.</item>

<item><par><lit>xsc.repransi</lit> can now have three values:</par>
<ulist>
<item><lit>0</lit>: coloring is off</item>
<item><lit>1</lit>: coloring is on for a dark background</item>
<item><lit>2</lit>: coloring is on for a light background</item>
</ulist>
<par>All <lit>repransi</lit> variables are now arrays with two strings,
the first for dark, the second for light.</par></item>
</ulist>
</section>


<section><title>Changes in 0.3.3 (released 05/30/2000)</title>
<ulist>
<item>The workaround for the trailing CDATA bug in <app>sgmlop</app> has been removed, so now
you'll need a newer version of <app>sgmlop</app> (included in <app>PyXML 0.5.5.1</app>)</item>
</ulist>
</section>


<section><title>Changes before 0.3.3</title>
<ulist>
<item>These changes predate written history.</item>
</ulist>
</section>

